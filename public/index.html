<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>TyreCheck</title>
  <style>
    body { font-family: system-ui; background:#f5f7fb; padding:40px; }
    .card { max-width:500px; margin:auto; background:#fff; padding:24px; border-radius:14px; box-shadow:0 6px 20px rgba(0,0,0,.1); }
    button { width:100%; padding:12px; margin-top:12px; border-radius:8px; border:0; background:#111827; color:#fff; font-size:16px; }
    img { max-width:100%; margin-top:12px; border-radius:10px; }
    .result { margin-top:16px; font-size:18px; }
    .good { color:#16a34a; }
    .defective { color:#dc2626; }
  </style>
</head>
<body>
  <div class="card">
    <h1>ðŸ›ž TyreCheck</h1>

    <input id="file" type="file" accept="image/*" />
    <img id="preview" />

    <button onclick="analyze()">Analyser</button>

    <div id="result" class="result"></div>
  </div>

  <script>
    const fileInput = document.getElementById("file");
    const preview = document.getElementById("preview");
    const resultDiv = document.getElementById("result");

    fileInput.onchange = () => {
      const f = fileInput.files[0];
      if (!f) return;
      preview.src = URL.createObjectURL(f);
    };

    async function analyze() {
      if (!fileInput.files[0]) {
        alert("Choisis une image");
        return;
      }

      resultDiv.textContent = "Analyse en coursâ€¦";

      const formData = new FormData();
      formData.append("image", fileInput.files[0]);

      const res = await fetch("/analyze", { method: "POST", body: formData });
      const data = await res.json();

      if (data.error) {
        resultDiv.textContent = "Erreur: " + data.error;
        return;
      }

      const pct = (data.confidence * 100).toFixed(2);
      const cls = data.class === "good" ? "good" : "defective";

      resultDiv.innerHTML = `
        <div class="${cls}">
          RÃ©sultat : <b>${data.class.toUpperCase()}</b><br/>
          Confiance : ${pct} %
        </div>
      `;
    }
  </script>
</body>
</html>


